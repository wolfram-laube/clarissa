%%{init: {'theme': 'base', 'themeVariables': {'fontSize': '15px'}}}%%
flowchart LR
    subgraph IN["INPUT"]
        A["üé§üí¨üåê‚ö°<br/>User Interface"]
    end

    subgraph TRANS["TRANSLATION"]
        B["NL Parser<br/>+ Confidence"]
    end

    subgraph CORE["CLARISSA CORE"]
        C["LLM + RL<br/>+ Constraints"]
    end

    subgraph VAL["VALIDATION"]
        D["Syntax<br/>Semantic<br/>Physics"]
    end

    subgraph GEN["GENERATION"]
        E["Deck<br/>Generator"]
    end

    subgraph SIM["SIMULATION"]
        F["OPM Flow"]
    end

    KB[("üìö<br/>Knowledge<br/>Base")]

    IN --> TRANS --> CORE --> VAL
    VAL -->|"‚úì"| GEN --> SIM
    VAL -->|"‚úó"| CORE
    
    KB -.-> CORE
    SIM -.->|"feedback"| CORE

    style IN fill:#e3f2fd
    style TRANS fill:#fff9c4
    style CORE fill:#fff3e0
    style VAL fill:#f3e5f5
    style GEN fill:#c8e6c9
    style SIM fill:#e8f5e9
    style KB fill:#fce4ec
