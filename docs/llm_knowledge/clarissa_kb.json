{
  "metadata": {
    "title": "CLARISSA Knowledge Base",
    "version": "1.1",
    "compiled": "2026-02-28",
    "lines_markdown": 1158,
    "sources": [
      "Genesis Curriculum (15p)",
      "Self-Directed Training Protocol (25p)",
      "Complete Self-Bootstrap Training (66p)",
      "Exercise 1 - Layered Waterflood (5p)",
      "Exercise 2 - CO2-WAG Compositional (11p)"
    ]
  },
  "operating_principles": [
    "Baseline first. Always validate before modifying.",
    "One change at a time. Isolate cause and effect.",
    "Document everything. Your knowledge folder is your memory.",
    "Trust material balance. If it doesn't close, something is wrong.",
    "Errors are teachers. Every failure teaches you something."
  ],
  "golden_rules": [
    "Never delete working code - comment it out",
    "Preserve reference values in comments",
    "Make one change at a time",
    "Test after each modification"
  ],
  "section_order": ["RUNSPEC", "GRID", "PROPS", "SOLUTION", "SUMMARY", "SCHEDULE"],
  "keywords": {
    "RUNSPEC": {
      "DIMENS": {"purpose": "Grid dimensions NX NY NZ", "example": "10 10 3 /", "note": "Total cells = NX*NY*NZ"},
      "OIL": {"purpose": "Enable oil phase", "type": "flag"},
      "WATER": {"purpose": "Enable water phase", "type": "flag"},
      "GAS": {"purpose": "Enable gas phase", "type": "flag"},
      "DISGAS": {"purpose": "Dissolved gas in oil", "type": "flag"},
      "FIELD": {"purpose": "FIELD unit system", "type": "flag"},
      "START": {"purpose": "Simulation start date", "example": "1 JAN 2017 /"},
      "COMPS": {"purpose": "Number of components", "example": "7 /"},
      "ENDSCALE": {"purpose": "Endpoint scaling", "example": "NODIR REVERS"},
      "TABDIMS": {"purpose": "Table dimension limits"},
      "WELLDIMS": {"purpose": "Well dimension limits"}
    },
    "GRID": {
      "DX": {"purpose": "Cell size X", "units": "ft (FIELD)", "repeat": "N*value"},
      "DY": {"purpose": "Cell size Y", "units": "ft (FIELD)"},
      "DZ": {"purpose": "Cell thickness", "units": "ft (FIELD)", "note": "Variable by layer"},
      "TOPS": {"purpose": "Depth to top of layer 1", "note": "Deeper layers auto-calculated from DZ"},
      "PORO": {"purpose": "Porosity", "range": "0.05-0.35 typical"},
      "PERMX": {"purpose": "Permeability X", "units": "mD"},
      "COPY": {"purpose": "Copy array to array", "example": "PERMX PERMY /"},
      "MULTIPLY": {"purpose": "Multiply array", "example": "PERMZ 0.01 /"},
      "EQUALS": {"purpose": "Set property by I,J,K region", "format": "KW VAL I1 I2 J1 J2 K1 K2 /"}
    },
    "PROPS": {
      "DENSITY": {"purpose": "Surface densities", "units": "lb/ft3 (FIELD)"},
      "PVDO": {"purpose": "Dead oil PVT", "columns": "Pressure Bo Viscosity", "critical_rule": "Bo MUST DECREASE with pressure"},
      "PVTW": {"purpose": "Water PVT", "columns": "Pref Bw Cw Viscosity Cv", "values": 5},
      "ROCK": {"purpose": "Rock compressibility", "columns": "Pref Cr"},
      "SWOF": {"purpose": "Water-oil rel perm", "columns": "Sw Krw Krow Pcow"},
      "SGOF": {"purpose": "Gas-oil rel perm", "columns": "Sg Krg Krog Pcgo"},
      "EOS": {"purpose": "Equation of state", "options": ["PR", "SRK"]},
      "CNAMES": {"purpose": "Component names"},
      "TCRIT": {"purpose": "Critical temperatures", "units": "Rankine"},
      "PCRIT": {"purpose": "Critical pressures", "units": "psia"},
      "VCRIT": {"purpose": "Critical volumes", "units": "ft3/lb-mol"},
      "ZCRIT": {"purpose": "Critical Z-factors"},
      "MW": {"purpose": "Molecular weights", "units": "lb/lb-mol"},
      "ACF": {"purpose": "Acentric factors"},
      "BIC": {"purpose": "Binary interaction coefficients", "format": "Lower triangular matrix, n*(n-1)/2 entries"},
      "SSHIFT": {"purpose": "Volume shift parameters"},
      "PARACHOR": {"purpose": "IFT/surface tension calculation"},
      "ZMFVD": {"purpose": "Initial mole fractions vs depth"},
      "TEMPVD": {"purpose": "Temperature vs depth"},
      "STCOND": {"purpose": "Standard conditions"},
      "FIELDSEP": {"purpose": "Separator conditions"}
    },
    "SOLUTION": {
      "EQUIL": {"purpose": "Equilibration", "format": "Datum_depth Pdat OWC Pcow GOC Pcgo /"},
      "SWATINIT": {"purpose": "Initial water saturation per cell"}
    },
    "SUMMARY": {
      "field_vectors": ["FOPR", "FOPT", "FWPR", "FWPT", "FWIR", "FWIT", "FPR", "FOIP", "FWCT"],
      "well_vectors": ["WOPR", "WWPR", "WGPR", "WLPR", "WOPT", "WWPT", "WGPT", "WLPT", "WWCT", "WGOR", "WBHP", "WPI", "WBP", "WWIR", "WGIR", "WWIT", "WGIT"]
    },
    "SCHEDULE": {
      "WELSPECS": {"format": "Well Group I J Datum_depth Phase /"},
      "COMPDAT": {"format": "Well I J K1 K2 Status 2* Radius 3* Dir 1* /"},
      "WCONPROD": {"format": "Well Status Mode Rate 4* MinBHP /", "modes": ["ORAT", "LRAT", "WRAT", "BHP", "RESV"]},
      "WCONINJE": {"format": "Well Type Status Mode Rate 1* MaxBHP /", "types": ["WATER", "GAS", "OIL"]},
      "WELLSTRE": {"purpose": "Gas stream composition", "example": "PURECO2 1.0 0.0 0.0 0.0 0.0 0.0 0.0 /"},
      "WINJGAS": {"purpose": "Assign gas stream", "example": "INJE STREAM PURECO2 /"},
      "ACTIONX": {"purpose": "Conditional actions", "trigger_example": "WWCT PROD1 >= 0.80"},
      "TSTEP": {"purpose": "Time advancement", "example": "12*30.4167 /"},
      "DATES": {"purpose": "Advance to date", "example": "1 JAN 2018 /"},
      "END": {"purpose": "Terminate simulation"}
    }
  },
  "debugging": {
    "methodology": [
      "Simulation fails -> Open .PRT file",
      "Search for ERROR or WARNING",
      "Find line number and keyword",
      "Go to location in .DATA file",
      "Fix issue",
      "Re-run"
    ],
    "common_errors": {
      "Unexpected keyword": {"cause": "Missing / terminator", "fix": "Add slash after data entry"},
      "Insufficient data": {"cause": "Wrong array count", "fix": "Check DIMENS NX*NY*NZ"},
      "Non-monotonic": {"cause": "PVDO Bo increasing", "fix": "Bo MUST DECREASE with pressure"},
      "Well outside grid": {"cause": "I,J exceeds DIMENS", "fix": "Check well I,J vs NX,NY"},
      "No oil in place": {"cause": "OWC above reservoir", "fix": "Check EQUIL OWC vs TOPS"}
    }
  },
  "validation": {
    "checklist_8point": [
      "OOIP matches hand calculation (within 5%)",
      "Material balance: FOPT = FOIP(initial) - FOIP(final)",
      "Pressure not negative, not increasing during production",
      "Water cut increases (waterflood) or stays at Swc (depletion)",
      "Production rates honor constraints",
      "Injection ≈ Production (pressure maintenance)",
      "No NaN or Inf values",
      "Simulation time reasonable"
    ],
    "material_balance": "Oil_recovered = FOIP(initial) - FOIP(final) = FOPT",
    "recovery_factor": "RF = (OOIP_initial - FOIP_final) / OOIP_initial × 100%",
    "ooip_formula": "OOIP (STB) = (NX*DX*NY*DY*NZ*DZ) * phi * (1 - Swc) / Bo",
    "ooip_notes": "For layered models, calculate per-layer and sum"
  },
  "units_conversion": {
    "ft2_to_acres": 43560,
    "ft3_to_barrels": 5.615,
    "psi_to_atm": 14.696,
    "F_to_R": "add 459.67"
  },
  "pattern_sizing": {
    "5spot_quarter_acres": 10,
    "5spot_quarter_side_ft": 660,
    "5spot_full_acres": 40,
    "formula": "Area_acres = (NX * DX * NY * DY) / 43560"
  },
  "workflow_12step": [
    "1. Create .DATA file following section order",
    "2. Define grid geometry (DX/DY/DZ based on pattern size)",
    "3. Assign rock properties (PORO, PERMX per layer, COPY, MULTIPLY)",
    "4. Build PVT tables (DENSITY, PVDO, PVTW, ROCK — verify Bo monotonicity)",
    "5. Build relative permeability (SWOF/SGOF — verify endpoints)",
    "6. Set EQUIL (datum depth, pressure, OWC/GOC)",
    "7. Define SUMMARY vectors (field + well level)",
    "8. Place wells (WELSPECS, COMPDAT, WCONPROD/WCONINJE)",
    "9. Validate syntax (terminators, array counts, keyword spelling)",
    "10. Run simulation (csh shell for tNavigator)",
    "11. Debug if needed (search .PRT for ERROR/WARNING)",
    "12. Validate results (8-point checklist)"
  ],
  "exercises": {
    "exercise_1": {
      "title": "Layered Waterflood",
      "difficulty": "BEGINNER",
      "grid": "10x10x3 = 300 cells",
      "cell_size": "200x200x10 ft",
      "pattern": "10-acre pilot waterflood, line drive",
      "phases": "Oil + Water (dead oil)",
      "layers": [
        {"layer": 1, "tops_ft": 4000, "dz_ft": 10, "poro": 0.200, "permx_mD": 50, "role": "Tight - bypassed oil"},
        {"layer": 2, "tops_ft": 4010, "dz_ft": 10, "poro": 0.250, "permx_mD": 300, "role": "Primary flow unit"},
        {"layer": 3, "tops_ft": 4020, "dz_ft": 10, "poro": 0.220, "permx_mD": 15, "role": "Moderate - bypassed oil"}
      ],
      "kv_kh": 0.01,
      "wells": {
        "PRD01": {"I": 1, "J": 1, "K1": 1, "K2": 3, "phase": "OIL", "mode": "ORAT", "rate": 5000, "min_bhp": 1000},
        "INJ01": {"I": 10, "J": 10, "K1": 1, "K2": 3, "phase": "WATER", "mode": "RATE", "rate": 7000, "max_bhp": 5000}
      },
      "equil": {"datum_ft": 4000, "pressure_psia": 3600, "owc_ft": 4100, "pcow": 0, "goc_ft": 0, "pcgo": 0},
      "pvdo": {
        "pressure_psia": [1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5000],
        "Bo_RB_STB": [1.200, 1.150, 1.100, 1.062, 1.040, 1.025, 1.018, 1.014, 1.012],
        "viscosity_cP": [1.20, 1.15, 1.10, 1.05, 1.00, 0.98, 0.97, 0.96, 0.95]
      },
      "density_lb_ft3": {"oil": 45.0, "water": 64.0, "gas": 0.044},
      "pvtw": {"pref_psia": 4000, "bw": 1.01, "cw": 3.0e-6, "visc_cP": 0.5, "cv": 0},
      "rock": {"pref_psia": 4000, "cr": 4.0e-6},
      "expected_ooip_MMSTB": "1.1-1.3",
      "start_date": "1 JAN 2017",
      "end_date": "1 JAN 2050",
      "reporting": "Annual DATES (33 report steps)",
      "reference_file": "SS_FIX_INJ_BHP_TNAV.DATA",
      "reference_path": "/home/matejkam/eclipse_claude_code/TEST_081425/"
    },
    "exercise_2": {
      "title": "CO2-WAG Compositional",
      "difficulty": "ADVANCED",
      "grid": "25x25x10 = 6250 cells",
      "cell_size": "10x10xVariable ft",
      "pattern": "6.25-acre sector model, line drive",
      "phases": "Oil + Water + Gas (7-component PR EOS)",
      "components": ["CO2", "C1N2", "C2C3H2S", "C4-C6", "C7-C10", "C11-C16", "C17+"],
      "layers": [
        {"layer": 1, "dz_ft": 1.0, "poro": 0.05, "permx_mD": 0.01, "role": "Barrier"},
        {"layer": 2, "dz_ft": 2.0, "poro": 0.10, "permx_mD": 5.00, "role": "Tight"},
        {"layer": 3, "dz_ft": 5.0, "poro": 0.15, "permx_mD": 10.00, "role": "Moderate"},
        {"layer": 4, "dz_ft": 8.0, "poro": 0.18, "permx_mD": 20.00, "role": "Good pay"},
        {"layer": 5, "dz_ft": 10.0, "poro": 0.20, "permx_mD": 25.00, "role": "Good pay"},
        {"layer": 6, "dz_ft": 7.0, "poro": 0.12, "permx_mD": 8.00, "role": "Moderate-tight"},
        {"layer": 7, "dz_ft": 50.0, "poro": 0.20, "permx_mD": 30.00, "role": "Primary flow unit"},
        {"layer": 8, "dz_ft": 1.0, "poro": 0.05, "permx_mD": 0.01, "role": "Barrier"},
        {"layer": 9, "dz_ft": 5.0, "poro": 0.15, "permx_mD": 10.00, "role": "Moderate"},
        {"layer": 10, "dz_ft": 4.0, "poro": 0.10, "permx_mD": 5.00, "role": "Tight"}
      ],
      "gross_thickness_ft": 93,
      "kv_kh": 0.01,
      "wells": {
        "PROD": {"I": 1, "J": 1, "K1": 1, "K2": 10, "mode": "RESV", "min_bhp": 1000, "wellbore_radius_ft": 0.1},
        "INJE": {"I": 25, "J": 25, "K1": 1, "K2": 10, "mode": "BHP", "max_bhp": 3000, "wellbore_radius_ft": 0.1}
      },
      "equil": {"datum_ft": 4000, "pressure_psia": 3000, "owc_ft": 5000, "pcow": 0, "goc_ft": 0, "pcgo": 0},
      "tempvd": {"depths_ft": [4000, 5000], "temps_F": [104, 104], "note": "isothermal"},
      "stcond": {"temp_F": 60.0, "pressure_psia": 14.70},
      "injection_stream": {"name": "PURECO2", "mole_fractions": [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]},
      "schedule": {
        "waterflood_months": 12,
        "wag_cycles": 10,
        "cycle_gas_months": 6,
        "cycle_water_months": 6,
        "total_years": 11,
        "start_date": "1 JAN 2010",
        "end_date": "1 JAN 2021"
      },
      "expected_rf_percent": "40-60"
    }
  },
  "eos_data_exercise2": {
    "components": ["CO2", "C1N2", "C2C3H2S", "C4-C6", "C7-C10", "C11-C16", "C17+"],
    "TCRIT_Rankine": [547.56, 339.21, 619.38, 835.43, 1117.84, 1344.62, 1686.57],
    "PCRIT_psia": [1071.34, 666.777, 722.559, 491.306, 389.654, 277.428, 159.299],
    "VCRIT_ft3_lbmol": [1.51, 1.565, 2.712, 5.018, 7.731, 12.125, 22.15],
    "ZCRIT": [0.27529, 0.28667, 0.29485, 0.27497, 0.25111, 0.23311, 0.19494],
    "MW_lb_lbmol": [44.01, 16.29, 36.19, 70.06, 114.17, 180.94, 358.25],
    "ACF": [0.225, 0.01394, 0.12537, 0.24519, 0.38317, 0.58202, 1.00542],
    "OMEGAA": 0.45724,
    "OMEGAB": 0.0778,
    "SSHIFT": [-0.062567, -0.086574, -0.1047, -0.041882, 0.120944, 0.208934, 0.342582],
    "PARACHOR": [78, 76.034, 127.336, 229.439, 329.701, 488.99, 925.994],
    "BIC_lower_triangular": [
      [0.0976],
      [0.1289, 0.0103],
      [0.1271, 0.0019, 0.0063],
      [0.1105, 0.0241, 0.0196, 0.003],
      [0.0943, 0.0494, 0.0333, 0.0061, 0.0],
      [0.0997, 0.1365, 0.0588, 0.0120, 0.0, 0.0]
    ],
    "ZMFVD_uniform": {"CO2": 0.0234, "C1N2": 0.2088, "C2C3H2S": 0.1837, "C4-C6": 0.1310, "C7-C10": 0.1385, "C11-C16": 0.1451, "C17+": 0.1695}
  },
  "reference_tables": {
    "swof_exercise1": {
      "Sw": [0.20, 0.30, 0.40, 0.50, 0.60, 0.70, 0.80, 0.90, 1.00],
      "Krw": [0.00, 0.03, 0.05, 0.08, 0.13, 0.22, 0.37, 0.61, 1.00],
      "Krow": [0.60, 0.45, 0.33, 0.20, 0.10, 0.00, 0.00, 0.00, 0.00],
      "Pcow": [0, 0, 0, 0, 0, 0, 0, 0, 0]
    },
    "swof_exercise2_rows": 18,
    "sgof_exercise2_rows": 18,
    "pvdo_exercise1": {
      "pressure_psia": [1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5000],
      "Bo": [1.200, 1.150, 1.100, 1.062, 1.040, 1.025, 1.018, 1.014, 1.012],
      "viscosity_cP": [1.20, 1.15, 1.10, 1.05, 1.00, 0.98, 0.97, 0.96, 0.95],
      "note": "Bo MUST be monotonically DECREASING"
    }
  },
  "economics": {
    "npv_formula": "NPV = sum((Revenue_n - Cost_n) / (1 + r)^n)",
    "oil_price_per_STB": 50,
    "water_cost_per_bbl": 3,
    "discount_rate": 0.10,
    "insight": "Early oil worth more than late oil (time value of money)"
  },
  "conformance": {
    "baseline_rf": 0.30,
    "surgical_shutoff_rf": "0.45-0.55",
    "wag_miscible_rf": "0.40-0.60"
  },
  "infrastructure": {
    "manual_path": "/home/matejkam/eclipse_claude_code/eclipse_manual_organized/",
    "knowledge_path": "/home/matejkam/eclipse_claude_code/ORSA_TRAINEE_KNOWLEDGE/",
    "test_path": "/home/matejkam/eclipse_claude_code/TEST_081425/",
    "reference_files": ["ECLIPSE_EXCEPTIONS.md", "SCHEDULE_QUICKREF.md", "SHAH_FIELD_SPECIFICS.md"]
  }
}
