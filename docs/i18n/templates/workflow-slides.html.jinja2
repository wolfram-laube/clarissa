<!DOCTYPE html>
<html lang="{{ lang_code }}" {% if meta.direction == 'rtl' %}dir="rtl"{% endif %}>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ t.slides.title }} - CLARISSA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/theme/black.min.css">
    <style>
        @import url('{{ meta.font_import }}');
        :root {
            --r-background-color: #0d1117;
            --r-main-font: '{{ meta.font_family }}', sans-serif;
            --r-main-font-size: 38px;
            --r-main-color: #e6edf3;
            --r-heading-font: '{{ meta.font_family }}', sans-serif;
            --r-heading-color: #58a6ff;
            --r-code-font: 'JetBrains Mono', monospace;
            --gitlab-orange: #fc6d26;
            --gitlab-purple: #6e49cb;
            --success-green: #3fb950;
            --danger-red: #f85149;
            --code-bg: #161b22;
        }
        .reveal { font-family: var(--r-main-font); {% if meta.direction == 'rtl' %}direction: rtl;{% endif %} }
        .reveal h1, .reveal h2 { font-weight: 700; text-transform: none; }
        .reveal h1 { font-size: 2.5em; background: linear-gradient(135deg, var(--gitlab-orange), var(--gitlab-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .reveal h2 { color: var(--r-heading-color); border-bottom: 3px solid var(--gitlab-orange); padding-bottom: 0.3em; display: inline-block; }
        .reveal code { font-family: var(--r-code-font); background: var(--code-bg); padding: 0.2em 0.5em; border-radius: 6px; color: #79c0ff; direction: ltr; }
        .reveal pre { background: var(--code-bg); border-radius: 12px; border: 1px solid #30363d; direction: ltr; text-align: left; }
        .reveal pre code { background: transparent; padding: 1em; font-size: 0.7em; }
        .workflow-box { background: linear-gradient(135deg, #161b22, #1c2128); border: 2px solid #30363d; border-radius: 16px; padding: 1.5em; margin: 0.5em 0; }
        .step-number { display: inline-flex; align-items: center; justify-content: center; width: 50px; height: 50px; background: linear-gradient(135deg, var(--gitlab-orange), var(--gitlab-purple)); border-radius: 50%; font-weight: 700; font-size: 1.3em; margin-{% if meta.direction == 'rtl' %}left{% else %}right{% endif %}: 0.5em; color: white; }
        .keyword { display: inline-block; background: var(--code-bg); border: 1px solid #30363d; padding: 0.3em 0.8em; border-radius: 20px; margin: 0.2em; font-family: var(--r-code-font); font-size: 0.8em; direction: ltr; }
        .keyword.closes { border-color: var(--success-green); color: var(--success-green); }
        .keyword.ref { border-color: var(--r-heading-color); color: var(--r-heading-color); }
        .warning-box { background: rgba(248, 81, 73, 0.1); border: 2px solid var(--danger-red); border-radius: 12px; padding: 1em; margin: 1em 0; }
        .success-box { background: rgba(63, 185, 80, 0.1); border: 2px solid var(--success-green); border-radius: 12px; padding: 1em; margin: 1em 0; }
        .flow-arrow { font-size: 2em; color: var(--gitlab-orange); margin: 0 0.3em; }
        .two-column { display: grid; grid-template-columns: 1fr 1fr; gap: 2em; }
        .label-demo { display: inline-block; padding: 0.2em 0.6em; border-radius: 12px; font-size: 0.7em; font-weight: 600; margin: 0.1em; }
        .label-type { background: #238636; }
        .label-priority-high { background: #ff6600; }
        .label-workflow { background: #6e49cb; }
        .checklist { list-style: none; padding: 0; }
        .checklist li { padding: 0.5em 0; padding-{% if meta.direction == 'rtl' %}right{% else %}left{% endif %}: 2em; position: relative; }
        .checklist li::before { content: "‚òë"; position: absolute; {% if meta.direction == 'rtl' %}right{% else %}left{% endif %}: 0; color: var(--success-green); font-size: 1.2em; }
        .big-emoji { font-size: 4em; display: block; margin: 0.5em 0; }
        
        /* Improved navigation bar */
        .top-nav { 
            position: fixed; 
            top: 0; 
            left: 0; 
            right: 0; 
            z-index: 100; 
            background: rgba(13, 17, 23, 0.95);
            border-bottom: 1px solid #30363d;
            padding: 0.6em 1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
        }
        .top-nav .home-link {
            color: var(--gitlab-orange);
            text-decoration: none;
            font-size: 0.9em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5em;
            padding: 0.4em 0.8em;
            border: 1px solid var(--gitlab-orange);
            border-radius: 6px;
            transition: all 0.2s;
        }
        .top-nav .home-link:hover {
            background: var(--gitlab-orange);
            color: white;
        }
        .top-nav .lang-switch { 
            position: static;
            display: flex;
            gap: 0.3em;
        }
        .top-nav .lang-switch a { 
            color: #8b949e; 
            text-decoration: none; 
            padding: 0.4em 0.7em; 
            border: 1px solid #30363d; 
            border-radius: 6px; 
            font-size: 0.85em;
            transition: all 0.2s;
        }
        .top-nav .lang-switch a:hover { 
            color: var(--gitlab-orange); 
            border-color: var(--gitlab-orange); 
        }
        .top-nav .lang-switch a.active { 
            color: white;
            background: var(--gitlab-purple); 
            border-color: var(--gitlab-purple); 
        }
        
        /* Adjust reveal.js to account for navbar */
        .reveal { margin-top: 50px; }
        
        .command-table { width: 100%; border-collapse: collapse; font-size: 0.7em; }
        .command-table th, .command-table td { padding: 0.8em; border: 1px solid #30363d; }
        .command-table th { background: var(--code-bg); color: var(--gitlab-orange); }
        @keyframes pulse { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
        .nav-hint { cursor: pointer; }
        .reveal .controls { color: var(--gitlab-orange) !important; }
    </style>
</head>
<body>
    <!-- Top Navigation Bar -->
    <nav class="top-nav">
        <a href="https://gitlab.com/wlaube/irena" class="home-link" target="_blank">
            ü¶ä {{ t.slides.nav.back_to_project }}
        </a>
        <div class="lang-switch">
            {% for lang in all_langs %}<a href="workflow-slides-{{ lang.code }}.html"{% if lang.code == lang_code %} class="active"{% endif %}>{{ lang.flag }} {{ lang.name }}</a>{% endfor %}
        </div>
    </nav>
    
    <div class="reveal"><div class="slides">
        <section>
            <h1>ü¶ä CLARISSA<br>{{ t.slides.title }}</h1>
            <p style="font-size: 1.2em; color: #8b949e;">{{ t.slides.subtitle }}</p>
            <div style="margin-top: 2em;">
                <span class="label-demo label-type">{{ t.slides.labels.type_feature }}</span>
                <span class="label-demo label-priority-high">{{ t.slides.labels.priority_high }}</span>
                <span class="label-demo label-workflow">{{ t.slides.labels.workflow_ready }}</span>
            </div>
                    <p class="nav-hint" style="margin-top: 3em; font-size: 0.7em; color: #6e7681; animation: pulse 2s infinite;">
                {{ t.slides.navigation.press_to_continue }} ¬∑ {{ t.slides.navigation.press_for_overview }}
            </p>
        </section>
        <section>
            <h2>üìã {{ t.slides.why_workflow.title }}</h2>
            <div class="two-column" style="margin-top: 1em;">
                <div class="warning-box">
                    <h3 style="color: var(--danger-red); margin-top: 0;">‚ùå {{ t.slides.why_workflow.without.title }}</h3>
                    <ul style="font-size: 0.7em;">{% for item in t.slides.why_workflow.without.list_items %}<li>{{ item }}</li>{% endfor %}</ul>
                </div>
                <div class="success-box">
                    <h3 style="color: var(--success-green); margin-top: 0;">‚úÖ {{ t.slides.why_workflow.with.title }}</h3>
                    <ul style="font-size: 0.7em;">{% for item in t.slides.why_workflow.with.list_items %}<li>{{ item }}</li>{% endfor %}</ul>
                </div>
            </div>
        </section>
        <section>
            <h2>üîÑ {{ t.slides.overview.title }}</h2>
            <div style="display: flex; {% if meta.direction == 'rtl' %}flex-direction: row-reverse;{% endif %} align-items: center; justify-content: center; flex-wrap: wrap; gap: 0.5em; font-size: 0.75em;">
                {% for step in t.slides.overview.steps %}
                <div class="workflow-box" style="padding: 0.8em; text-align: center;"><span class="step-number">{{ step.number }}</span><br>{{ step.label }}</div>
                {% if not loop.last %}<span class="flow-arrow">{% if meta.direction == 'rtl' %}‚Üê{% else %}‚Üí{% endif %}</span>{% endif %}
                {% endfor %}
            </div>
        </section>
        <section>
            <h2><span class="step-number">{{ t.slides.overview.steps[1].number }}</span> {{ t.slides.branch.title }}</h2>
            <p>{{ t.slides.branch.warning }}</p>
            <pre><code># ALWAYS start with issue number!
git checkout -b 12-extend-gitignore</code></pre>
            <div class="warning-box" style="font-size: 0.8em;"><strong>‚ö†Ô∏è</strong> {{ t.slides.branch.important }}</div>
        </section>
        <section>
            <section>
                <h2><span class="step-number">{{ t.slides.overview.steps[2].number }}</span> {{ t.slides.commits.title }}</h2>
                <p>{{ t.slides.commits.description }}</p>
                <pre><code>git commit -m "type: description #12"</code></pre>
            </section>
            <section>
                <h2>üìù {{ t.slides.commits.conventional.title }}</h2>
                <table class="command-table">{% for type in t.slides.commits.conventional.types %}<tr><td><code>{{ type.prefix }}</code></td><td>{{ type.description }}</td></tr>{% endfor %}</table>
            </section>
            <section>
                <h2>üîó {{ t.slides.commits.magic_words.title }}</h2>
                <p>{{ t.slides.commits.magic_words.description }}</p>
                <div style="margin: 1em 0;">{% for word in t.slides.commits.magic_words.closing %}<span class="keyword closes">{{ word }}</span>{% endfor %}</div>
            </section>
        </section>
        <section>
            <h2><span class="step-number">{{ t.slides.overview.steps[3].number }}</span> {{ t.slides.merge_request.title }}</h2>
            <pre><code>git push -u origin 12-extend-gitignore</code></pre>
            <div class="workflow-box">
                <p><strong>{{ t.slides.merge_request.description_must_contain }}</strong></p>
                <ul style="font-size: 0.8em;">{% for item in t.slides.merge_request.description_items %}<li>{{ item }}</li>{% endfor %}</ul>
            </div>
        </section>
        <section>
            <h2><span class="step-number">{{ t.slides.overview.steps[4].number }}</span> {{ t.slides.review_merge.title }}</h2>
            <div class="two-column">
                <div><h3 style="color: #d29922;">üëÄ {{ t.slides.review_merge.review.title }}</h3><ul style="font-size: 0.7em;">{% for step in t.slides.review_merge.review.steps %}<li>{{ step }}</li>{% endfor %}</ul></div>
                <div><h3 style="color: var(--success-green);">‚úÖ {{ t.slides.review_merge.merge.title }}</h3><ul style="font-size: 0.7em;">{% for step in t.slides.review_merge.merge.steps %}<li>{{ step }}</li>{% endfor %}</ul></div>
            </div>
        </section>
        <section>
            <h2>üö´ {{ t.slides.donts.title }}</h2>
            <div class="warning-box"><ol style="font-size: 0.8em;">{% for item in t.slides.donts.list_items %}<li><strong>{{ item.title }}</strong><br><span style="color: #8b949e;">{% if meta.direction == 'rtl' %}‚Üê{% else %}‚Üí{% endif %} {{ item.tip }}</span></li>{% endfor %}</ol></div>
        </section>
        <section>
            <h2>‚úÖ {{ t.slides.checklist.title }}</h2>
            <ul class="checklist" style="font-size: 0.8em;">{% for item in t.slides.checklist.list_items %}<li>{{ item }}</li>{% endfor %}</ul>
        </section>
        <section>
            <span class="big-emoji">ü¶ä</span>
            <h2>{{ t.slides.end.title }}</h2>
            <p style="color: #8b949e;">{{ t.slides.end.subtitle }}</p>
            <p style="font-size: 0.7em; margin-top: 2em;">
                <span class="keyword ref">#issue</span><span class="flow-arrow">{% if meta.direction == 'rtl' %}‚Üê{% else %}‚Üí{% endif %}</span>
                <span class="keyword ref">branch</span><span class="flow-arrow">{% if meta.direction == 'rtl' %}‚Üê{% else %}‚Üí{% endif %}</span>
                <span class="keyword ref">commit</span><span class="flow-arrow">{% if meta.direction == 'rtl' %}‚Üê{% else %}‚Üí{% endif %}</span>
                <span class="keyword ref">MR</span><span class="flow-arrow">{% if meta.direction == 'rtl' %}‚Üê{% else %}‚Üí{% endif %}</span>
                <span class="keyword closes">Closes #X</span>
            </p>
        </section>
    </div></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/reveal.min.js"></script>
    <script>
        Reveal.initialize({ 
            hash: true, 
            slideNumber: 'c/t', 
            transition: 'slide', 
            controls: true, 
            controlsTutorial: true, 
            progress: true, 
            mouseWheel: true, 
            touch: true{% if meta.direction == 'rtl' %}, 
            rtl: true{% endif %} 
        });
        
        // Click anywhere to navigate: right 70% = next, left 30% = prev
        document.querySelector('.reveal').addEventListener('click', function(e) {
            if (e.target.closest('a, button, pre, code, .controls, .top-nav')) return;
            var clickX = e.clientX;
            var width = window.innerWidth;
            if (clickX > width * 0.3) {
                Reveal.next();
            } else {
                Reveal.prev();
            }
        });
        
        // Add cursor style
        document.querySelector('.reveal').style.cursor = 'pointer';
    </script>
</body>
</html>
