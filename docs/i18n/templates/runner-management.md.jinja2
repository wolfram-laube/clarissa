# {{ runner_management.title }}

## {{ runner_management.overview }}

{{ runner_management.overview_desc }}

| {{ runner_management.runners_table.runner }} | {{ runner_management.runners_table.location }} | {{ runner_management.runners_table.executor }} | {{ runner_management.runners_table.tags }} | {{ runner_management.runners_table.status }} | {{ runner_management.runners_table.cost }} |
|--------|----------|----------|------|--------|------|
| mac-group-shell | Mac | Shell | mac, shell, deploy | ğŸŸ¢ {{ runner_management.runners_table.online }} | $0 |
| mac-docker | Mac | Docker | docker | ğŸŸ¢ {{ runner_management.runners_table.online }} | $0 |
| mac-k8s | Mac (Docker Desktop) | Kubernetes | mac-k8s, k8s, docker | ğŸŸ¢ {{ runner_management.runners_table.online }} | $0 |
| gcp-k8s | GCP VM (K3s) | Kubernetes | gcp, k8s, docker | ğŸ”´ {{ runner_management.runners_table.offline }} | ~$0.02/h |

---

## {{ runner_management.mac_runners.title }}

### {{ runner_management.mac_runners.start }}

```bash
brew services start gitlab-runner
```

### {{ runner_management.mac_runners.stop }}

```bash
brew services stop gitlab-runner
```

### {{ runner_management.mac_runners.status }}

```bash
brew services list | grep gitlab
```

---

## {{ runner_management.gcp_runners.title }}

### {{ runner_management.gcp_runners.via_pipeline }}

```
GitLab â†’ CI/CD â†’ Pipelines â†’ Run pipeline â†’ gcp-vm-start â–¶ï¸
```

| Job | {{ getting_started.function }} |
|-----|----------|
| `gcp-vm-start` | {{ runner_management.gcp_runners.start_vm }} (~30s) |
| `gcp-vm-stop` | {{ runner_management.gcp_runners.stop_vm }} |
| `gcp-vm-status` | {{ runner_management.gcp_runners.check_status }} |

### {{ runner_management.gcp_runners.via_cli }}

```bash
# {{ runner_management.gcp_runners.start_vm }}
gcloud compute instances start gitlab-runner --zone=europe-west3-a

# {{ runner_management.gcp_runners.stop_vm }}
gcloud compute instances stop gitlab-runner --zone=europe-west3-a

# {{ runner_management.gcp_runners.check_status }}
gcloud compute instances describe gitlab-runner --zone=europe-west3-a --format="get(status)"
```

---

## {{ runner_management.job_targeting.title }}

{{ runner_management.job_targeting.desc }}:

```yaml
# {{ runner_management.job_targeting.any_runner }}
job1:
  script: echo "Hello"

# {{ runner_management.job_targeting.mac_only }}
job2:
  tags: [mac]
  script: echo "Mac only"

# {{ runner_management.job_targeting.k8s_only }}
job3:
  tags: [k8s]
  script: echo "Kubernetes"

# {{ runner_management.job_targeting.gcp_only }}
job4:
  tags: [gcp, k8s]
  script: echo "GCP K8s"
```

---

## {{ runner_management.workflow.title }}

| {{ runner_management.workflow.develop }} | {{ runner_management.workflow.test }} | {{ runner_management.workflow.production }} |
|---------|------|------------|
| {{ runner_management.workflow.develop_desc }} | {{ runner_management.workflow.test_desc }} | {{ runner_management.workflow.production_desc }} |

---

## {{ runner_management.troubleshooting.title }}

### {{ runner_management.troubleshooting.runner_offline }}

{{ runner_management.troubleshooting.check_service }}:

```bash
brew services list | grep gitlab
```

### {{ runner_management.troubleshooting.gcp_vm_stopped }}

{{ runner_management.troubleshooting.start_via_pipeline }}:

```bash
gcloud compute instances start gitlab-runner --zone=europe-west3-a
```

### {{ runner_management.troubleshooting.job_stuck }}

{{ runner_management.troubleshooting.check_tags }}:

```yaml
tags: [mac]  # â† {{ runner_management.troubleshooting.check_tags }}
```
