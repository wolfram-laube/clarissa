sequenceDiagram
    participant U as ðŸ‘¤ User
    participant M as ðŸŽ¤ Mic/VAD
    participant S as ðŸ—£ï¸ STT
    participant I as ðŸ§  Intent
    participant D as ðŸ’¬ Dialog
    participant E as âš¡ Execute
    participant V as ðŸ“Š Viz
    participant T as ðŸ”Š TTS

    U->>M: "Show me layer 3 at day 500"
    M->>S: Audio stream
    S->>I: "show me layer 3 at day 500"
    I->>I: Parse intent
    
    alt High confidence (>0.9)
        I->>E: {intent: visualize, layer: 3, time: 500}
        E->>V: render_cross_section(layer=3, time=500)
        V-->>U: Display visualization
        E->>T: "Showing water saturation at layer 3"
        T-->>U: Audio response
    else Medium confidence
        I->>D: Request confirmation
        D-->>U: "Show water saturation at layer 3, day 500?"
        U->>M: "Yes"
        M->>S: Audio
        S->>D: "yes"
        D->>E: Confirmed intent
        E->>V: render_cross_section()
    else Low confidence
        I->>D: Need clarification
        D-->>U: "Which property? Saturation or pressure?"
        U->>M: "Saturation"
        M->>S: Audio
        S->>D: "saturation"
        D->>I: Slot filled
    end
