# Runner Benchmark - All 12 Runners

.benchmark_base:
  stage: test
  timeout: 10 minutes
  when: manual
  allow_failure: true
  script:
    - echo "=== BENCHMARK START ==="
    - echo "Runner - $CI_RUNNER_DESCRIPTION"
    - hostname
    - date
    - echo "--- CPU Test ---"
    - python3 --version
    - echo "Counting primes..."
    - python3 -c "print(sum(1 for n in range(2,100000) if all(n%i for i in range(2,int(n**0.5)+1))))"
    - echo "--- Disk Test ---"
    - dd if=/dev/zero of=/tmp/test bs=1M count=50 2>&1 || true
    - rm -f /tmp/test
    - echo "=== BENCHMARK END ==="

# Mac #1
benchmark-mac-group-shell:
  extends: .benchmark_base
  tags: [mac-group-shell]

benchmark-mac-docker:
  extends: .benchmark_base
  tags: [mac-docker]
  image: python:3.11-slim

benchmark-mac-k8s:
  extends: .benchmark_base
  tags: [mac-k8s]
  image: python:3.11-slim

# Mac #2
benchmark-mac2-shell:
  extends: .benchmark_base
  tags: [mac2-shell]

benchmark-mac2-docker:
  extends: .benchmark_base
  tags: [mac2-docker]
  image: python:3.11-slim

benchmark-mac2-k8s:
  extends: .benchmark_base
  tags: [mac2-k8s]
  image: python:3.11-slim

# Linux Yoga
benchmark-linux-shell:
  extends: .benchmark_base
  tags: [linux-shell]

benchmark-linux-docker:
  extends: .benchmark_base
  tags: [linux-docker]
  image: python:3.11-slim

benchmark-linux-k8s:
  extends: .benchmark_base
  tags: [linux-k8s]
  image: python:3.11-slim

# GCP VM
benchmark-gcp-shell:
  extends: .benchmark_base
  tags: [gcp-shell]

benchmark-gcp-docker:
  extends: .benchmark_base
  tags: [gcp-docker]
  image: python:3.11-slim

benchmark-gcp-k8s:
  extends: .benchmark_base
  tags: [gcp-k8s]
  image: python:3.11-slim
